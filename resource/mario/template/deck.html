<!DOCTYPE html>
<html$if(lang)$ lang="$lang$"$endif$$if(dir)$ dir="$dir$"$endif$>

<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
$for(author-meta)$
  <meta name="author" content="$author-meta$">
$endfor$
$if(date-meta)$
  <meta name="dcterms.date" content="$date-meta$">
$endif$
$if(keywords)$
  <meta name="keywords" content="$for(keywords)$$keywords$$sep$, $endfor$">
$endif$
$if(title)$
$if(subtitle)$
  <title>$title$: $subtitle$</title>
$else$
  <title>$title$</title>
$endif$
$endif$
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  
  <script>
    /* Store JSON encoded Pandoc meta data in a global variable for easy
    reference from any script. */
    window.Decker = {meta: $decker-meta$};
  </script>

  <link rel="stylesheet" href="$decker-support-dir$/vendor/reveal/css/reset.css">
  <link rel="stylesheet" href="$decker-support-dir$/vendor/reveal/css/reveal.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/whiteboard/whiteboard.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/menu/menu.css">
$if(highlightjs)$
  <link rel="stylesheet" href="$decker-support-dir$/plugins/highlight/$highlightjs$.css">
$endif$
$if(decker-engine.base-url)$
  <link rel="stylesheet" href="$decker-support-dir$/engine/engine.css">
$endif$
  <!-- <link rel="stylesheet" href="$decker-support-dir$/examiner/examiner.css"> -->
  <link rel="stylesheet" href="$decker-support-dir$/plugins/explain/explain.css">
  <link rel="stylesheet" href="$decker-support-dir$/vendor/videojs/video-js.min.css">
  <link rel="stylesheet" href="$decker-support-dir$/css/mario.css">
$for(template.css)$
  <link rel="stylesheet" href="$template.css$"/>
$endfor$

  <style>
    :root {
      /* whiteboard buttons */
      --whiteboard-icon-size: $whiteboard-icon-size$;
      --whiteboard-active-color: $whiteboard-active-color$;
      --whiteboard-inactive-color: $whiteboard-inactive-color$;
      --whiteboard-background-color: $whiteboard-background-color$;      
    } 
  </style>
  
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? String.raw`$decker-support-dir$/vendor/reveal/css/print/pdf.css` : String.raw`$decker-support-dir$/vendor/reveal/css/print/paper.css`;
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
</head>

<body>
  <div class="reveal">
    <div class="slides">

$if(title)$
      <section id="$idprefix$title-slide" class="title-page">
         <h1 style="display:none">Title</h1>
         <div class="white-on-blue">
            <div class="title"> $title$ </div>
         $if(subtitle)$
            <div class="subtitle"> $subtitle$ </div>
         $endif$
         </div>

         $if(template.teaser)$
         <img class="teaser" src=$template.teaser$>
         $endif$
         $if(authors)$
         <div class="authors">
         $for(authors)$
            $if(it.name)$
                <div class="author">
                    $it.name$ 
                    $if(it.affiliation)$
                        <div class="affiliation"> $it.affiliation$ </div>
                    $endif$
                </div>
            $endif$
         $endfor$
         </div>
         $endif$

         $if(author)$
         <div class="author"> $author$ </div>
         $endif$

         $if(affiliation)$
         <div class="affiliation"> $affiliation$ </div>
         $endif$

         $if(date)$
         <div class="date"> $date$ </div>
         $endif$
      </section>
$endif$

$if(toc)$
    <section id="$idprefix$TOC">
    $table-of-contents$
    </section>
$endif$

$body$

    </div>
  </div>


  <script src="$decker-support-dir$/vendor/reveal/js/reveal.js"></script>
  <script src="$decker-support-dir$/vendor/videojs/video.min.js"></script>
  <script src="$decker-support-dir$/js/decker.js"></script>
  <script src="$decker-support-dir$/js/sage.js"></script>

  <script>
      // this has to be done before reveal highlight plugin is initialized
      prepareCodeHighlighting();
      prepareSAGE();
  </script>

$if(decker-engine.base-url)$
  <script type="module" crossorigin>
    import {contactEngine} from "./$decker-support-dir$/engine/engine.js";
    contactEngine("$decker-engine.base-url$", "$decker-engine.deck-id$");
  </script>
$endif$

  <script type="module">
    import {prepareExaminer} from "./$decker-support-dir$/examiner/examiner.js";
    prepareExaminer();
  </script>

  <script>
    // Full list of configuration options available at: https://revealjs.com/config/
    let revealConfig = { 
      ...Decker.meta.reveal,
      // reveal.js plugins. 
      // These are not just strings and they can not be listed in Decker.meta.reveal
      dependencies: [
          { src: String.raw`$decker-support-dir$/plugins/charts/Chart.js`},
          { src: String.raw`$decker-support-dir$/plugins/charts/plugin-errorbars.js`},
          { src: String.raw`$decker-support-dir$/plugins/charts/plugin-colorschemes.js`},
          { src: String.raw`$decker-support-dir$/plugins/charts/plugin-csszoom.js`},
          { src: String.raw`$decker-support-dir$/plugins/charts/csv2chart.js`},
          { src: String.raw`$decker-support-dir$/plugins/math/math.js` },
          { src: String.raw`$decker-support-dir$/plugins/whiteboard/whiteboard.js`},
          { src: String.raw`$decker-support-dir$/plugins/zoom/zoom.js` },
          { src: String.raw`$decker-support-dir$/plugins/print/print.js` },
          { src: String.raw`$decker-support-dir$/plugins/search/search.js`, async: true },
          { src: String.raw`$decker-support-dir$/plugins/quiz-wue/quiz-wue.js` },
          { src: String.raw`$decker-support-dir$/plugins/quiz/quiz.js` },
          { src: String.raw`$decker-support-dir$/plugins/jingles/jingles.js`, async: true },
          { src: String.raw`$decker-support-dir$/plugins/highlight/highlight.js` },
          { src: String.raw`$decker-support-dir$/plugins/menu/menu.js`, async: true },
          { src: String.raw`$decker-support-dir$/plugins/explain/explain.js` },
          { src: String.raw`$decker-support-dir$/vendor/reveal/plugin/notes/notes.js`, async: true }
      ]
    };

    revealConfig.math.mathjax = String.raw`$decker-support-dir$/vendor/mathjax/`;

    console.log(revealConfig)
    Reveal.initialize(revealConfig);
  </script>

</body>
</html>
