<!DOCTYPE html>
<html$if(lang)$ lang="$lang$"$endif$$if(dir)$ dir="$dir$"$endif$>

<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
$for(author-meta)$
  <meta name="author" content="$author-meta$">
$endfor$
$if(date-meta)$
  <meta name="dcterms.date" content="$date-meta$">
$endif$
$if(keywords)$
  <meta name="keywords" content="$for(keywords)$$keywords$$sep$, $endfor$">
$endif$
$if(title)$
$if(subtitle)$
  <title>$title$: $subtitle$</title>
$else$
  <title>$title$</title>
$endif$
$endif$
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
$if(template.favicon)$
  <link rel="shortcut icon" href="$template.favicon$">
$endif$

  <!-- Default values for CSS variables can live here. They can be overridden by
  meta data values. -->
  <link rel="stylesheet" href="$decker-support-dir$/css/variables.css">

  <!-- Transfer meta data values from keys `palette.colors` and `css-variables`
  into a style sheet. Default values can come from `variables.css`. -->
  <style class="css-declarations">
    :root {
      $for(css-light-color-declarations)$
        $css-light-color-declarations$
      $endfor$
    }
    :root.dark {
      $for(css-dark-color-declarations)$
        $css-dark-color-declarations$
      $endfor$
    }
    :root {
      $for(css-declarations)$
        $css-declarations$
      $endfor$
    }
  </style>

  <link rel="stylesheet" href="$decker-support-dir$/vendor/reveal/dist/reset.css">
  <link rel="stylesheet" href="$decker-support-dir$/vendor/reveal/dist/reveal.css">
  <link rel="stylesheet" href="$decker-support-dir$/components/components.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/decker/ui-anchors.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/whiteboard/whiteboard.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/menu/menu.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/feedback/feedback.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/explain/explain.css">
  $if(live-captions)$
  <link rel="stylesheet" href="$decker-support-dir$/plugins/live-captioning/live-captioning.css">
  $endif$
  <link rel="stylesheet" href="$decker-support-dir$/vendor/videojs/video-js.min.css">
  <link rel="stylesheet" href="$decker-support-dir$/vendor/css/$highlightjs$.css">
  <link rel="stylesheet" href="$decker-support-dir$/flyingFocus/flying-focus.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/quiz-wue/quiz-wue.css">
  <link rel="stylesheet" href="$decker-support-dir$/css/deck.css">
  <link rel="stylesheet" href="$decker-support-dir$/css/tudo-deck.css">
  $for(template.css)$
  <link rel="stylesheet" href="$template.css$"/>
  $endfor$
  $for(template.deck.css)$
  <link rel="stylesheet" href="$template.deck.css$">
  $endfor$

  <script type="module">
    /* Store JSON encoded Pandoc meta data in a global variable. */
    import initializeDecker from "./$decker-support-dir$/js/decker.js";
    initializeDecker("$decker-meta-url$");
  </script>

</head>

<body $if(hide-quizzes)$class="hide-quizzes"$endif$>
  <div class="reveal">
    <div class="slides">

      $if(title)$
      <section id="title-slide">
        <div class="decker">
          <div class="alignment">
            <div class="background-on-accent">
              <h1 class="title">$title$</h1>
              $if(subtitle)$
              <h2 class="subtitle">$subtitle$</h2>
              $endif$
            </div>
      
            $if(authors)$
            <div class="authors">
              $for(authors)$
              $if(it.name)$
              <div class="author">
                $if(it.url)$<a href="$it.url$">$endif$ $it.name$ $if(it.url)$</a>$endif$
                $if(it.affiliation)$
                <div class="affiliation">
                  $if(it.affiliation.url)$<a href="$it.affiliation.url$">$endif$ $if(it.affiliation.institution)$ $it.affiliation.institution$ $else$ $it.affiliation$ $endif$ $if(it.affiliation.url)$</a>$endif$
                </div>
                $endif$
                $if(it.affiliation.logo)$
                <img src="$projectPath$$it.affiliation.logo$">
                $endif$
              </div>
              $endif$
              $endfor$
            </div>
            $endif$
            
            $if(author)$
            <div class="author">
              $if(author.name)$
                $if(copyright)$
                <span class="copyright">
                  $if(copyright.type)$
                    $if(copyright.url)$<a href="$copyright.url$">$endif$ $copyright.type$ $if(copyright.url)$</a>$endif$
                  $else$
                    $if(copyright-url)$<a href="$copyright-url$">$endif$ $copyright$ $if(copyright-url)$</a>$endif$
                  $endif$
                </span>
                $endif$
                <span>
                $if(author.url)$<a href="$author.url$">$endif$ $author.name$ $if(author.url)$</a>$endif$
                </span>
              $else$
                $if(copyright)$
                <span class="copyright">
                  $if(copyright.type)$
                    $if(copyright.url)$<a href="$copyright.url$">$endif$ $copyright.type$ $if(copyright.url)$</a>$endif$
                  $else$
                    $if(copyright-url)$<a href="$copyright-url$">$endif$ $copyright$ $if(copyright-url)$</a>$endif$
                  $endif$
                </span>
                $endif$
                <span>
                $if(author-url)$<a href="$author-url$">$endif$ $author$ $if(author-url)$</a>$endif$
                </span>
              $endif$
            </div>
            $endif$
      
            $if(affiliation)$
            <div class="affiliation">
              $if(affiliation.institution)$
                <p>$if(affiliation.url)$<a href="$affiliation.url$">$endif$ $affiliation.institution$ $if(affiliation.url)$</a>$endif$</p>
                $if(affiliation.logo)$
                <img src="$projectPath$$affiliation.logo$">
                $endif$
              $else$            
                <p>$if(affiliation-url)$<a href="$affiliation-url$">$endif$ $affiliation$ $if(affiliation-url)$</a>$endif$</p>
              $endif$
            </div>
            $endif$
      
            $if(date)$
              <div class="date"> $date$ </div>
            $endif$
      
            $if(teaser)$
            <div class="teaser">
              $if(teaser.url)$
              <img class="teaser" src="$projectPath$$teaser.url$" $if(teaser.width)$width="$teaser.width$"$endif$ $if(teaser.height)$height="$teaser.height$"$endif$>
              $else$
              <img class="teaser" src="$projectPath$$teaser$">
              $endif$
            </div>
            $endif$
      
            $if(logos)$
            <div class="logos">
              $for(logos)$
              <img class="logo" src="$projectPath$$logos$">
              $endfor$
            </div>
            $endif$
          </div>
        </div>
      </section>
      $endif$
      
$body$

    </div>
  </div>

  <script src="$decker-support-dir$/vendor/videojs/video.min.js"></script>
  <script type="module" src="$decker-support-dir$/components/custom-dialog.js"></script>
  <script type="module" src="./$decker-support-dir$/js/color-scheme.js"></script>

  <script type="module">
    // import Reveal and all plugins
    import Reveal from './$decker-support-dir$/vendor/reveal/dist/reveal.esm.js';
    import deckerPlugin from './$decker-support-dir$/plugins/decker/decker.js';
    import uiAnchorsPlugin from './$decker-support-dir$/plugins/decker/ui-anchors.js'
    import mathPlugin from './$decker-support-dir$/plugins/math/math.js';
    import whiteboardPlugin from './$decker-support-dir$/plugins/whiteboard/whiteboard.js';
    import sagePlugin from './$decker-support-dir$/plugins/sage/sage.js';
    import searchPlugin from './$decker-support-dir$/plugins/search/search.js';
    import zoomPlugin from './$decker-support-dir$/plugins/zoom/zoom.js';
    import printPlugin from './$decker-support-dir$/plugins/print/print.js';
    import jinglesPlugin from './$decker-support-dir$/plugins/jingles/jingles.js';
    import quizPlugin from './$decker-support-dir$/plugins/quiz/quiz.js';
    import quizWuePlugin from './$decker-support-dir$/plugins/quiz-wue/quiz-wue.js';
    import explainPlugin from './$decker-support-dir$/plugins/explain/explain.js';
    import chartsPlugin from './$decker-support-dir$/plugins/charts/charts.js';
    import menuPlugin from './$decker-support-dir$/plugins/menu/menu.js';
    import feedbackPlugin from './$decker-support-dir$/plugins/feedback/feedback.js';
    import highlightPlugin from './$decker-support-dir$/vendor/reveal/plugin/highlight/highlight.esm.js';
    import notesPlugin from './$decker-support-dir$/vendor/reveal/plugin/notes/notes.esm.js';
    $if(live-captions)$
    import captionPlugin from './$decker-support-dir$/plugins/live-captioning/live-captioning.js';
    $endif$
    import a11yPlugin from './$decker-support-dir$/plugins/a11y/a11y.js';

    let revealConfig = { 
      // reveal configuration (see https://revealjs.com/config/)
      ...Decker.meta.reveal,

      // plugin configuration
      math: { mathjax: String.raw`$decker-support-dir$/vendor/mathjax/`, ...Decker.meta.math },
      chart: Decker.meta.chart,
      menu: Decker.meta.menu,
      explain: Decker.meta.explain,
      feedback: Decker.meta.feedback || Decker.meta["decker-engine"],
      jingles: Decker.meta.jingles,

      // list of plugins
      plugins: [
        deckerPlugin,
        uiAnchorsPlugin,
        sagePlugin,
        mathPlugin,
        chartsPlugin,
        whiteboardPlugin,
        searchPlugin,
        zoomPlugin,
        printPlugin,
        jinglesPlugin,
        quizPlugin,
        quizWuePlugin,
        explainPlugin,
        menuPlugin,
        feedbackPlugin,
        highlightPlugin,
        notesPlugin,
        $if(live-captions)$
        captionPlugin,
        $endif$
        a11yPlugin,
      ]
    };

    Reveal.initialize(revealConfig);
  </script>

</body>
<script src="$decker-support-dir$/js/inert-polyfill.min.js"></script>
<!-- script src="$decker-support-dir$/js/inert.min.js"></script -->
<!-- Use the other implementation if things break under Firefox -->
</html>
